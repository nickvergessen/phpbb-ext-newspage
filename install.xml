<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="https://www.phpbb.com/mods/xml/modx-1.2.6.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>

		<title lang="de"><![CDATA[NV newspage]]></title>
		<title lang="en"><![CDATA[NV newspage]]></title>

		<description lang="de"><![CDATA[Fügt eine neue Seite zum Board hinzu, auf der eine einstellbare Anzahl von News angezeigt werden.
Der Text kann auf eine bestimmte Anzahl von Buchstaben gekürzt werden.
Die Buttons (ändern, zitieren,... und Benutzerbuttons) können ausgeschalten werden.]]></description>
		<description lang="en"><![CDATA[Adds an extra page to the board where a switchable number of news can be displayed.
The news texts can be shorten to a given number of characters.
Also the icons can be switched on/off (post icons, user icons).]]></description>

		<author-notes lang="de"><![CDATA[Diese MOD benötigt php5.]]></author-notes>
		<author-notes lang="en"><![CDATA[This MOD required php5.]]></author-notes>
		
		<github><![CDATA[https://github.com/nickvergessen/phpbb3-mod-newspage]]></github>

		<author-group>
			<author>
				<realname><![CDATA[Joas Schilling]]></realname>
				<email><![CDATA[nickvergessen@gmx.de]]></email>
				<username><![CDATA[nickvergessen]]></username>
				<homepage><![CDATA[http://www.flying-bits.org/]]></homepage>
				<contributions />
			</author>

			<author>
				<realname><![CDATA[Falk Seidel]]></realname>
				<email><![CDATA[admin@un1matr1x.de]]></email>
				<username><![CDATA[Unimatrix_0]]></username>
				<homepage><![CDATA[http://un1matr1x.de/]]></homepage>
				<contributions-group>
					<contributions status="current" from="2011-01-22" position="Developer" />
				</contributions-group>
			</author>
		</author-group>

		<mod-version>1.0.8</mod-version>

		<installation>
			<level>easy</level>
			<time>300</time>
			<target-version>3.0.11</target-version>
		</installation>

		<link-group>
			<link type="language" lang="de" href="contrib/de.xml">Anleitung für das deutsche Sprachpaket</link>
			<link type="language" lang="en" href="contrib/de.xml">Manual for German Language-set</link>
			<link type="template" lang="de" href="contrib/subsilver2.xml">Anleitung für das Style subsilver2</link>
			<link type="template" lang="en" href="contrib/subsilver2.xml">Manual for subsilver2 Style</link>
			<link type="parent" lang="de" href="contrib/update_1_0_7_to_1_0_8/update.xml">Anleitung für das Update von 1.0.7 zu 1.0.8</link>
			<link type="parent" lang="en" href="contrib/update_1_0_7_to_1_0_8/update.xml">Manual for the update 1.0.7 to 1.0.8</link>
			<link type="parent" lang="de" href="contrib/update_1_0_6_to_1_0_7/update.xml">Anleitung für das Update von 1.0.6 zu 1.0.7</link>
			<link type="parent" lang="en" href="contrib/update_1_0_6_to_1_0_7/update.xml">Manual for the update 1.0.6 to 1.0.7</link>
		</link-group>

		<history>
			<entry>
				<date>2013-02-11</date>
				<rev-version>1.0.8</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Feature] Support ReIMG Image Resizer Mod (Bug: #990)]]></change>
					<change><![CDATA[[Change] Update MODx to version 1.2.6 (Bug: #988)]]></change>
					<change><![CDATA[[Change] Remove PHP closing tags (Bug: #992)]]></change>
					<change><![CDATA[[Change] Validation of archive (Bug: #989, Patch by: Un1matr1x)]]></change>
					<change><![CDATA[[Fix] Sorting of categories (Bug: #991)]]></change>
				</changelog>
			</entry>
			
			<entry>
				<date>2012-12-01</date>
				<rev-version>1.0.7</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Change] Update TMT to version 1.2 (Bug: #978)]]></change>
					<change><![CDATA[[Change] Update UMIL to version 1.0.5 (Bug: #986)]]></change>
					<change><![CDATA[[Fix] Add option to hide shadow topics (Bug: #966, Patch by: Un1matr1x)]]></change>
				</changelog>
			</entry>
			
			<entry>
				<date>2012-02-02</date>
				<rev-version>1.0.6</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Change] phpBB target-version raised to 3.0.10 (Bug: #935)]]></change>
					<change><![CDATA[[Change] Update TMT to version 1.1]]></change>
					<change><![CDATA[[Fix] ICQ profile link leads to a webservice that is no longer active (Bug: #937)]]></change>
					<change><![CDATA[[Fix] Clean language files (remove some old and wrong strings) (Bug: #936, Patch by: Un1matr1x)]]></change>
					<change><![CDATA[[Fix] Add categories to pagination (Bug: #929, Patch by: Un1matr1x)]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2011-07-04</date>
				<rev-version>1.0.5.1</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Change] phpBB target-version raised to 3.0.9 (Bug: #814)]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2011-05-25</date>
				<rev-version>1.0.5</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Fix] PHP Notice: Undefined variable: user_cache, when post was edited by a different user (Bug: #796)]]></change>
					<change><![CDATA[[Fix] Issue in Trim-Message-Tool with []-brackets that are no BBCode (Bug: #795)]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2011-05-19</date>
				<rev-version>1.0.4</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Feature] Use php-installer feature of MODx 1.2.5 and fix some other XML issues. (Bug: #780)]]></change>
					<change><![CDATA[[Feature] Use Trim-Message-Tool to correctly trim posts in their lenght without breaking BBCodes. (Bug: #779)]]></change>
					<change><![CDATA[[Change] Remove the tailing year after the month at the archiveblock. (Bug: #794)]]></change>
					<change><![CDATA[[Change] Change order of archive-blocks. (Bug: #786)]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2011-02-18</date>
				<rev-version>1.0.3</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Feature] Display a little notice at the News-Info, when there is a poll in the topic. (Bug: #610)]]></change>
					<change><![CDATA[[Feature] Archive-block per year (Bug: #770, Patch by: Un1matr1x)]]></change>
					<change><![CDATA[[Feature] "Categories" added (Bug: #697, Patch by: Un1matr1x)]]></change>
					<change><![CDATA[[Feature] "Show Attachment"-Option (Bug: #766, Patch by: Un1matr1x)]]></change>
					<change><![CDATA[[Fix] Add "IN_INSTALL" to installer to avoid the "delete install/" message. (Bug: #778, Patch by: Un1matr1x)]]></change>
					<change><![CDATA[[Fix] Correctly close BBCodes when shorttening the text. (Bug: #530)]]></change>
					<change><![CDATA[[Fix] Attachments are displayed, although user does not have the required forum-permissions (Bug: #777)]]></change>
					<change><![CDATA[[Fix] Merged css-changes into css-file (Bug: #769)]]></change>
					<change><![CDATA[[Fix] Intersect News-Forums array and Permissions array before doing the SQL-query to make it less heavy. (Bug: #768)]]></change>
					<change><![CDATA[[Fix] sql_in_set-error when the forum does not contain any news or the user can not read any forum. (Bugs: #611, #649)]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2009-07-15</date>
				<rev-version>1.0.2</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Fix] MOD-Validation-Report]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2009-07-02</date>
				<rev-version>1.0.1</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Feature] View pagination in archive]]></change>
					<change><![CDATA[[Feature] Display number of archive-entries (Bug: #527)]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2007-12-18</date>
				<rev-version>0.1.0</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Fix] Make it work with phpBB 3.0.0]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2007-10-16</date>
				<rev-version>0.0.2</rev-version>
				<changelog lang="en">
					<change><![CDATA[[Feature] Option to hide profile information.]]></change>
					<change><![CDATA[[Feature] Option to hide post buttons (quote, edit, delete, ...).]]></change>
					<change><![CDATA[[Feature] Add support for subsilver2]]></change>
					<change><![CDATA[[Feature] Option to trim the news-message to a given length.]]></change>
				</changelog>
			</entry>

			<entry>
				<date>2007-09-09</date>
				<rev-version>0.0.1</rev-version>
				<changelog lang="en">
					<change><![CDATA[Alpha version]]></change>
				</changelog>
			</entry>
		</history>
	</header>

	<action-group>
		<copy>
			<file from="root/newspage.php" to="newspage.php" />
			<file from="root/adm/mods/nv_newspage_version.php" to="adm/mods/nv_newspage_version.php" />
			<file from="root/adm/style/acp_newspage.html" to="adm/style/acp_newspage.html" />
			<file from="root/includes/acp/acp_newspage.php" to="includes/acp/acp_newspage.php" />
			<file from="root/includes/acp/info/acp_newspage.php" to="includes/acp/info/acp_newspage.php" />
			<file from="root/includes/trim_message/bbcodes.php" to="includes/trim_message/bbcodes.php" />
			<file from="root/includes/trim_message/trim_message.php" to="includes/trim_message/trim_message.php" />
			<file from="root/install/*.*" to="install/*.*" />
			<file from="root/language/en/mods/info_acp_newspage.php" to="language/en/mods/info_acp_newspage.php" />
			<file from="root/styles/prosilver/template/newspage_body.html" to="styles/prosilver/template/newspage_body.html" />
			<file from="root/styles/prosilver/theme/nv_newspage.css" to="styles/prosilver/theme/nv_newspage.css" />
			<file from="root/styles/prosilver/theme/images/icon_news.gif" to="styles/prosilver/theme/images/icon_news.gif" />
			<file from="root/umil/*.*" to="umil/*.*" />
		</copy>

		<open src="viewonline.php">
			<edit>
				<find><![CDATA[		case 'report':
			$location = $user->lang['REPORTING_POST'];
			$location_url = append_sid("{$phpbb_root_path}index.$phpEx");
		break;]]></find>
				<action type="after-add"><![CDATA[		case ((defined('NEWSPAGE_FILE')) ? NEWSPAGE_FILE : 'newspage'):
			$user->add_lang('mods/info_acp_newspage');
			$location = $user->lang['NEWS'];
			$newspage_file = (defined('NEWSPAGE_FILE')) ? NEWSPAGE_FILE : 'newspage';
			$location_url = append_sid("{$phpbb_root_path}{$newspage_file}.$phpEx");
		break;]]></action>
			</edit>
		</open>

		<open src="includes/constants.php">
			<edit>
				<find><![CDATA[// Additional constants]]></find>
				<action type="after-add"><![CDATA[define('NEWSPAGE_FILE', 'newspage');]]></action>
			</edit>
		</open>

		<open src="includes/functions.php">
			<edit>
				<find><![CDATA[// The following assigns all _common_ variables that may be used at any point in a template.]]></find>
				<action type="before-add"><![CDATA[$user->add_lang('mods/info_acp_newspage');
	$newspage_file = (defined('NEWSPAGE_FILE')) ? NEWSPAGE_FILE : 'newspage';]]></action>
			</edit>
			<edit>
				<find><![CDATA['U_PRIVATEMSGS'			=> append_sid("{$phpbb_root_path}ucp.$phpEx", 'i=pm&amp;folder=inbox'),]]></find>
				<action type="before-add"><![CDATA['U_NEWS'				=> append_sid("{$phpbb_root_path}{$newspage_file}.$phpEx"),]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<find><![CDATA[<li class="icon-faq"><a href="{U_FAQ}" title="{L_FAQ_EXPLAIN}">{L_FAQ}</a></li>]]></find>
				<action type="before-add"><![CDATA[<li class="icon-news"><a href="{U_NEWS}" title="{L_NEWS}">{L_NEWS}</a></li>]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/theme/stylesheet.css">
			<edit>
				<find><![CDATA[@import url("colours.css");]]></find>
				<action type="after-add"><![CDATA[@import url("nv_newspage.css");]]></action>
			</edit>
		</open>

		<php-installer><![CDATA[install/index.php]]></php-installer>

		<diy-instructions lang="de"><![CDATA[Leere den Cache im "Administrations-Bereich" (ACP) > "Allgemein" > "Den Cache leeren"

Aktualisiere deine Styles:
		"Administrations-Bereich" (ACP) > "Styles" > "Templates" > jedes > "Aktualisieren"
		"Administrations-Bereich" (ACP) > "Styles" > "Themes" > jedes > "Aktualisieren"

Wenn du die MOD übersetzen möchtest, forke die MOD auf github.com, füge deine Sprachdateien hinzu und sende einen Pull-Request.]]></diy-instructions>
		<diy-instructions lang="en"><![CDATA[Clear your cache in the "Administration Control Panel" (ACP) > "General" > "Purge the cache"

Refresh your Styles:
		"Administration Control Panel" (ACP) > "Styles" > "Templates" > each > "refresh"
		"Administration Control Panel" (ACP) > "Styles" > "Themes" > each > "refresh"

If you want to translate this MOD, fork it on github.com, add your language to the repository and send a pull-request.]]></diy-instructions>
	</action-group>
</mod>